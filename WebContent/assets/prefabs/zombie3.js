
// -- user code here --

/* --- start generated code --- */

// Generated by  1.5.4 (Phaser v2.6.2)


/**
 * zombie3
 * @param {Phaser.Game} aGame A reference to the currently running game.
 * @param {Number} aX The x coordinate (in world space) to position the Sprite at.
 * @param {Number} aY The y coordinate (in world space) to position the Sprite at.
 * @param {any} aKey This is the image or texture used by the Sprite during rendering. It can be a string which is a reference to the Cache entry, or an instance of a RenderTexture or PIXI.Texture.
 * @param {any} aFrame If this Sprite is using part of a sprite sheet or texture atlas you can specify the exact frame to use by giving a string or numeric index.
 */
function zombie3(aGame, aX, aY, aKey, aFrame) {
	Phaser.Sprite.call(this, aGame, aX, aY, aKey || 'atlas2', aFrame == undefined || aFrame == null? 'idle20000' : aFrame);
	this.scale.set(0.5, 0.5);
	this.anchor.set(0.5, 0.5);
	var _anim_idle = this.animations.add('idle', ['idle20000', 'idle20001', 'idle20002', 'idle20003', 'idle20004', 'idle20005', 'idle20006', 'idle20007', 'idle20008'], 12, true);
	this.animations.add('walking', ['walk20000', 'walk20001', 'walk20002', 'walk20003', 'walk20004', 'walk20005', 'walk20006', 'walk20007', 'walk20008'], 6, true);
	_anim_idle.play();
	this.game.physics.arcade.enable(this);
	this.body.setSize(80.0, 111.4209213256836);
	this.body.collideWorldBounds = true;
	this.body.gravity.y = 980.0;
	
		this.afterCreate();
	
}

/** @type Phaser.Sprite */
var zombie3_proto = Object.create(Phaser.Sprite.prototype);
zombie3.prototype = zombie3_proto;
zombie3.prototype.constructor = zombie3;

/* --- end generated code --- */
// -- user code here --
zombie3.prototype.afterCreate = function() {
	
	this.life=20;
	this.velocity = 20;

	this.animations.play('walking');
	

	    
};
zombie3.prototype.diceCerebro = function() {
	
	var probabilidaddeHablar = Math.random()*10;
	if(probabilidaddeHablar>9){
		brainsAudio.play('brainsAudio');
		
	}
	
}


zombie3.prototype.update = function() {
	
this.game.physics.arcade.collide(this, this.game.state.getCurrentState﻿().fPlatforms, this.addZombietoPlatform, null, this);

if(this.x>860){
console.log('destroying');
this.game.state.getCurrentState﻿().zombiesPorEliminar--;
if(this.game.state.getCurrentState﻿().zombiesPorEliminar<=0){
	console.log('ultimoZombieEliminado');
	this.game.state.getCurrentState﻿().ultimoZobieEliminado = true;
}	
this.destroy();

}

}
zombie3.prototype.addZombietoPlatform = function(me,platform){
	if(this.currentPlatform !=  platform){
		
		if(this.currentPlatform!=null){
		var index = this.currentPlatform.data.zombiesWalking.indexOf(this);
   		console.log("index "  + index)
			if (index > -1) {
			  this.currentPlatform.data.zombiesWalking.splice(index, 1); //retiro el zombie de la plataforma para que no sigan disparando las gallinas 
			}
		}
		this.currentPlatform =  platform;
		platform.data.zombiesWalking.push(this);
		this.isNewPlatform =  true;

	}
	
	if(platform.data.direction){
		this.body.velocity.x=this.velocity ;
		this.scale.x =0.5; 
	}else{
		this.body.velocity.x=-this.velocity;
		this.scale.x =-0.5; 
	}
}
